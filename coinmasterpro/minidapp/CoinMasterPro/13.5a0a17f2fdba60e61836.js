(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{ZWju:function(n,o,t){"use strict";t.r(o),t.d(o,"ViewCoinsPageModule",function(){return A});var i=t("ofXK"),e=t("3Pt+"),c=t("TEn/"),r=t("tyNb"),a=t("mrSG"),s=t("i7g9"),l=t("HH2O"),g=t("H+bZ"),d=t("jtHE"),b=t("fXoL"),u=t("6mc2");const f=["aggregateBtn"];function p(n,o){1&n&&(b.Nb(0,"div",6),b.jc(1," This token does not exist in your vallet. "),b.Mb())}function M(n,o){if(1&n&&b.Lb(0,"img",19),2&n){const n=b.Xb(2);b.bc("src",null==n.token[0]?null:n.token[0].icon,b.gc)}}function h(n,o){if(1&n&&b.Lb(0,"img",19),2&n){const n=b.Xb(2);b.ac("src",null==n.token[0]?null:n.token[0].icon,b.gc)}}function m(n,o){1&n&&b.Lb(0,"img",20)}function C(n,o){1&n&&(b.Nb(0,"span"),b.jc(1,"s"),b.Mb())}function O(n,o){if(1&n&&(b.Nb(0,"p",21),b.Nb(1,"span",22),b.jc(2),b.Mb(),b.jc(3," coin"),b.ic(4,C,2,0,"span",5),b.jc(5," available"),b.Mb()),2&n){const n=b.Xb(2);b.Ab(2),b.kc(null==n.coins?null:n.coins.length),b.Ab(2),b.ac("ngIf",(null==n.coins?null:n.coins.length)>1)}}function P(n,o){1&n&&(b.Nb(0,"p"),b.jc(1," No coins available "),b.Mb())}function _(n,o){1&n&&(b.Nb(0,"div",6),b.jc(1," Coins not found for token, they may be in the mempool awaiting confirmation, please wait. "),b.Mb())}const k=function(n,o){return{coinid:n,amount:o}};function v(n,o){if(1&n){const n=b.Ob();b.Nb(0,"ion-row"),b.Nb(1,"ion-col",25),b.Nb(2,"ion-avatar"),b.Lb(3,"img",26),b.Mb(),b.Mb(),b.Nb(4,"ion-col"),b.Nb(5,"ion-label"),b.Nb(6,"h2"),b.jc(7),b.Mb(),b.Nb(8,"p"),b.jc(9),b.Mb(),b.Mb(),b.Mb(),b.Nb(10,"ion-col",27),b.Nb(11,"ion-checkbox",28),b.Vb("ionChange",function(o){return b.fc(n),b.Xb(3).onCheckboxChange(o)}),b.Mb(),b.Mb(),b.Mb()}if(2&n){const n=o.$implicit;b.Ab(7),b.lc(" ",n.coin.address.substring(0,7)+"..."+n.coin.address.substring(n.coin.address.length-2,n.coin.address.length)," "),b.Ab(2),b.lc(" ",n.coin.amount," "),b.Ab(2),b.ac("value",b.dc(3,k,n.coin.coinid,n.coin.amount))}}function x(n,o){if(1&n&&(b.Nb(0,"ion-grid",null,23),b.ic(2,v,12,6,"ion-row",24),b.Mb()),2&n){const n=b.Xb(2);b.Ab(2),b.ac("ngForOf",n.coins)}}function w(n,o){if(1&n){const n=b.Ob();b.Nb(0,"ion-card"),b.Nb(1,"ion-card-header"),b.Nb(2,"div",7),b.Nb(3,"ion-button",8,9),b.Vb("click",function(){b.fc(n);const o=b.Xb();return o.displayAggregateModal(o.aggregateForm.value,null==o.token[0]?null:o.token[0].tokenid)}),b.jc(5," Aggregate "),b.Mb(),b.Nb(6,"ion-button",10),b.Vb("click",function(){b.fc(n);const o=b.Xb();return o.displaySendModal(o.aggregateForm.value,null==o.token[0]?null:o.token[0].tokenid)}),b.jc(7," Send "),b.Mb(),b.Mb(),b.Nb(8,"ion-avatar"),b.ic(9,M,1,1,"img",11),b.ic(10,h,1,1,"img",11),b.ic(11,m,1,0,"img",12),b.Mb(),b.Nb(12,"div",13),b.Nb(13,"h2"),b.jc(14),b.Mb(),b.ic(15,O,6,2,"p",14),b.ic(16,P,2,0,"p",5),b.Mb(),b.Mb(),b.Nb(17,"ion-card-header",15),b.Nb(18,"ion-icon",16),b.Vb("click",function(){return b.fc(n),b.Xb().flipCoins()}),b.Mb(),b.Mb(),b.Nb(19,"ion-card-content",17),b.ic(20,_,2,0,"div",4),b.Nb(21,"form",18),b.ic(22,x,3,1,"ion-grid",5),b.Mb(),b.Mb(),b.Mb()}if(2&n){const n=b.Xb();b.Ab(3),b.ac("disabled",n.aggregateForm.invalid),b.Ab(3),b.ac("disabled",n.aggregateForm.invalid),b.Ab(3),b.ac("ngIf",(null==n.token[0]?null:n.token[0].icon)&&""!==(null==n.token[0]?null:n.token[0].icon)),b.Ab(1),b.ac("ngIf",(null==n.token[0]?null:n.token[0].icon)&&""===(null==n.token[0]?null:n.token[0].icon)),b.Ab(1),b.ac("ngIf","0x00"===(null==n.token[0]?null:n.token[0].tokenid)),b.Ab(3),b.kc(null==n.token[0]?null:n.token[0].token),b.Ab(1),b.ac("ngIf",(null==n.coins?null:n.coins.length)>0),b.Ab(1),b.ac("ngIf",0===(null==n.coins?null:n.coins.length)),b.Ab(4),b.ac("ngIf",!n.isCoinsFound),b.Ab(1),b.ac("formGroup",n.aggregateForm),b.Ab(1),b.ac("ngIf",n.isCoinsFound)}}const y=[{path:"",component:(()=>{class n{constructor(n,o,t,i,e){this.modalController=n,this.route=o,this.api=t,this.tools=i,this.formBuilder=e,this.ascending=!0,this.initForm(),this.selectedCoins=new d.a(1),this.coins=[]}ionViewWillEnter(){this.resetForm(),this.$routerSubscription=this.route.params.subscribe(n=>{this.$balanceSubscription=this.api.$balance.subscribe(o=>{if(this.token=o.filter(o=>o.tokenid===n.tokenId),this.token.length>0){this.found=!0;const n=this.api.getCoinsForToken(this.token[0].tokenid);try{n&&n.then(n=>{this.coins=n.response.coins,this.coins=this.coins.sort(this.sortAsc),this.coins.length>0?this.isCoinsFound=!0:(this.isCoinsFound=!1,console.log("No coins found."))})}catch(t){throw new Error(g.c+" : failed to fetch coins.")}"0x00"!==this.token[0].tokenid&&""===this.token[0].icon&&(this.token[0].icon=this.tools.createAvatarIcon(this.token[0].tokenid))}else this.found=!1})})}ionViewWillLeave(){this.$routerSubscription.unsubscribe(),this.$balanceSubscription.unsubscribe(),this.resetForm()}sortAsc(n,o){return n.coin.amount.localeCompare(o.coin.amount)}sortDesc(n,o){return o.coin.amount.localeCompare(n.coin.amount)}flipCoins(){this.ascending?(this.ascending=!1,this.coins=this.coins.sort(this.sortDesc)):(this.ascending=!0,this.coins=this.coins.sort(this.sortAsc))}initForm(){this.aggregateForm=this.formBuilder.group({selectedCoinsArr:this.formBuilder.array([],[e.k.required,e.k.minLength(2)])})}resetForm(){this.aggregateForm.reset(),this.initForm()}onCheckboxChange(n){const o=this.aggregateForm.get("selectedCoinsArr");if(n.target.checked)o.push(new e.b(n.target.value));else{let t=0;o.controls.forEach(i=>{i.value!==n.target.value?t++:o.removeAt(t)})}}displayAggregateModal(n,o){return Object(a.a)(this,void 0,void 0,function*(){this.resetForm();const t=yield this.modalController.create({component:l.a,cssClass:"aggregate-page-modal",componentProps:{selectedCoinsArr:n,tokenid:o}});return yield t.present()})}displaySendModal(n,o){return Object(a.a)(this,void 0,void 0,function*(){this.resetForm();const t=yield this.modalController.create({component:s.a,componentProps:{selectedCoinsArr:n,tokenid:o}});return yield t.present()})}}return n.\u0275fac=function(o){return new(o||n)(b.Kb(c.A),b.Kb(r.a),b.Kb(g.a),b.Kb(u.a),b.Kb(e.a))},n.\u0275cmp=b.Eb({type:n,selectors:[["app-view-coins"]],viewQuery:function(n,o){if(1&n&&b.mc(f,1),2&n){let n;b.ec(n=b.Wb())&&(o.aggregateBtn=n.first)}},decls:11,vars:3,consts:[[1,"ion-no-border",3,"translucent"],[1,"wrap"],["routerLink","../../../tab2","fill","clear",1,"ion-no-padding","ion-no-margin"],["name","arrow-back-outline"],["class","not-found-text-wrapper",4,"ngIf"],[4,"ngIf"],[1,"not-found-text-wrapper"],[1,"functions"],["fill","clear","type","submit",3,"disabled","click"],["aggregateBtn",""],["fill","clear",3,"disabled","click"],["alt","tokenIcon",3,"src",4,"ngIf"],["src","assets/minima-logo-box.svg","alt","tokenIcon",4,"ngIf"],[1,"token-details"],["class","ion-no-padding ion-no-margin",4,"ngIf"],["id","tools",1,"ion-no-padding"],["name","settings",3,"click"],[1,"ion-no-padding"],["id","aggregateForm",3,"formGroup"],["alt","tokenIcon",3,"src"],["src","assets/minima-logo-box.svg","alt","tokenIcon"],[1,"ion-no-padding","ion-no-margin"],["id","coinAmount"],["coinsGrid",""],[4,"ngFor","ngForOf"],["sizeXs","3","sizeSm","2","sizeMd","1"],["src","assets/coin.svg","alt","coinImage"],["id","checkbox"],[3,"value","ionChange"]],template:function(n,o){1&n&&(b.Nb(0,"ion-header",0),b.Nb(1,"ion-toolbar"),b.Nb(2,"ion-title"),b.Nb(3,"div",1),b.Nb(4,"ion-button",2),b.Lb(5,"ion-icon",3),b.Mb(),b.Nb(6,"span"),b.jc(7," Coins "),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(8,"ion-content"),b.ic(9,p,2,0,"div",4),b.ic(10,w,23,11,"ion-card",5),b.Mb()),2&n&&(b.ac("translucent",!0),b.Ab(9),b.ac("ngIf",!o.found),b.Ab(1),b.ac("ngIf",o.found))},directives:[c.m,c.x,c.w,c.d,c.D,r.h,c.n,c.k,i.i,c.e,c.g,c.c,c.f,e.l,e.i,e.d,c.l,i.h,c.s,c.j,c.p,c.i,c.a],styles:["div.wrap[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}div.wrap[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:10px}div.wrap[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background-hover:none;--color-hover:var(--ion-color-secondary);--opacity:0.8}div.wrap[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5em}div.wrap[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}div.not-found-text-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-family:manrope-light;padding:15px}ion-card[_ngcontent-%COMP%]{margin-left:35px;margin-right:35px}p[_ngcontent-%COMP%]   span#coinAmount[_ngcontent-%COMP%]{font-family:manrope-semibold;color:var(--ion-color-primary)}ion-card[_ngcontent-%COMP%]{padding:5px;box-shadow:none;background-color:var(--ion-color-items);border:1px solid var(--ion-color-item-borders);border-radius:15px}ion-card[_ngcontent-%COMP%]   ion-card-header#tools[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-right:17px;padding-bottom:5px}ion-card[_ngcontent-%COMP%]   ion-card-header#tools[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:1.3em}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{margin-left:12px;margin-right:13px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{padding:9px 15px;margin-bottom:15px;border-radius:15px;background-color:var(--ion-toolbar-background);border:1px solid var(--ion-color-item-borders)}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col#checkbox[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{display:flex;align-items:center}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--ion-color-text);font-variant-numeric:tabular-nums;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{display:flex;align-items:center}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:34.5px;width:34.5px}div.token-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-right:10px}div.functions[_ngcontent-%COMP%]{float:right;display:flex;flex-direction:column}div.functions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{color:var(--ion-color-text);border:1px solid var(--ion-color-ruler);text-transform:none}div.functions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{justify-self:flex-start;margin-right:10px;color:var(--ion-color-text)}div.functions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover, div.functions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]}),n})()}];let N=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=b.Ib({type:n}),n.\u0275inj=b.Hb({imports:[[r.i.forChild(y)],r.i]}),n})(),A=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=b.Ib({type:n}),n.\u0275inj=b.Hb({imports:[[i.b,e.e,e.j,c.y,N]]}),n})()}}]);